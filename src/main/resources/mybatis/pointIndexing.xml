<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd"> 

<mapper namespace="pointIndexing">

	<select id="pointIndexing" resultType="java.util.LinkedHashMap" >
		select nhdplus_indexing.flat_point_indexer(                
             ppoint                  := ST_POINTFromText('POINT(-89.00110244750977 43.355827671386834)', 4326)    
            ,pindexingmethod         := 'DISTANCE' 
            ,pfcodeallow             := null     
            ,pfcodedeny              := null     
            ,pdistancemaxdistkm      := 10
            ,praindroppathmaxdistkm  := null     
            ,praindropsnapmaxdistkm  := null
         );
	</select>

    <select id="select" resultType="java.util.LinkedHashMap" fetchSize="500">
        select nhdplus_comid,
        	   st_asgeojson(shape) shape
          from nhdplus_navigation.tmp_navigation_results
            order by totaldist, hydroseq
     </select>

</mapper>       